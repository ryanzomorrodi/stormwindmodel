<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Extracting snapshots of the wind field at different times • stormwindmodel</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extracting snapshots of the wind field at different times">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stormwindmodel</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Details.html">Details of `stormwindmodel` package</a></li>
    <li><a class="dropdown-item" href="../articles/modeling_outside_us.html">Modeling storm winds outside the United States</a></li>
    <li><a class="dropdown-item" href="../articles/Overview.html">Using the `stormwindmodel` package</a></li>
    <li><a class="dropdown-item" href="../articles/single_location.html">Modeling windspeed and direction at a single location</a></li>
    <li><a class="dropdown-item" href="../articles/timepoints.html">Extracting snapshots of the wind field at different times</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/geanders/stormwindmodel/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Extracting snapshots of the wind field at different times</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/geanders/stormwindmodel/blob/HEAD/vignettes/timepoints.Rmd" class="external-link"><code>vignettes/timepoints.Rmd</code></a></small>
      <div class="d-none name"><code>timepoints.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/geanders/stormwindmodel" class="external-link">stormwindmodel</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearth/" class="external-link">rnaturalearth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sjmgarnier.github.io/viridis/" class="external-link">viridis</a></span><span class="op">)</span></span></code></pre></div>
<p>In the other vignettes, we have focused on how to create summaries of
how severe the peak winds or wind gusts were at any point over the
course of a storm for a certain location. In the course of modeling
these storm-long values, the model estimates winds at a number of time
points over the course of the storm. This vignette describes how you can
extract and use those values to look at snapshots of the modeled wind
field at specific times during the storm.</p>
<p>This example will use the Typhoon Mangkhut from 2018. The tracks for
this storm are included as an example dataset in this package. We have
described how to set up these data for the model, as well as how to
create a set of grid points to model to, in another vignette for this
package (“Modeling winds outside the United States”). We have repeated
the code here, but please check the other vignette for more details on
the process:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"mangkhut_tracks"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">all_countries</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_countries.html" class="external-link">ne_countries</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="st">"medium"</span>, </span>
<span>                                  returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="va">near_landfall</span> <span class="op">&lt;-</span> <span class="va">all_countries</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/valid.html" class="external-link">st_make_valid</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crop.html" class="external-link">st_crop</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="fl">110</span>, xmax <span class="op">=</span> <span class="fl">117</span>, ymin <span class="op">=</span> <span class="fl">19</span>, ymax <span class="op">=</span> <span class="fl">25</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: attribute variables are assumed to be spatially constant throughout</span></span>
<span><span class="co">#&gt; all geometries</span></span>
<span></span>
<span><span class="va">grid_near_landfall</span> <span class="op">&lt;-</span> <span class="va">near_landfall</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_make_grid.html" class="external-link">st_make_grid</a></span><span class="op">(</span>what <span class="op">=</span> <span class="st">"polygons"</span>, square <span class="op">=</span> <span class="cn">FALSE</span>, cellsize <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>gridid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">points_near_landfall</span> <span class="op">&lt;-</span> <span class="va">near_landfall</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_make_grid.html" class="external-link">st_make_grid</a></span><span class="op">(</span>what <span class="op">=</span> <span class="st">"centers"</span>, square <span class="op">=</span> <span class="cn">FALSE</span>, cellsize <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>gridid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">points_to_model</span> <span class="op">&lt;-</span> <span class="va">points_near_landfall</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>glon <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>,</span>
<span>         glat <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_drop_geometry</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>gridid <span class="op">=</span> <span class="va">gridid</span>, </span>
<span>         glandsea <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mapply.html" class="external-link">mapply</a></span><span class="op">(</span><span class="va">check_over_land</span>, tclat <span class="op">=</span> <span class="va">.</span><span class="op">$</span><span class="va">glat</span>, tclon <span class="op">=</span> <span class="va">.</span><span class="op">$</span><span class="va">glon</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mangkhut_to_model</span> <span class="op">&lt;-</span> <span class="va">mangkhut_tracks</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/transmute.html" class="external-link">transmute</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">iso_time</span>, format <span class="op">=</span> <span class="st">"%Y%m%d%H%M"</span><span class="op">)</span>, </span>
<span>            latitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">lat</span><span class="op">)</span>, </span>
<span>            longitude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">lon</span><span class="op">)</span>,</span>
<span>            wind <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">usa_wind</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next, we can use these inputs to model the wind field during the
storm. To generate output that includes the values for each of the
timepoints that were modeled, you can use the <code>...</code> function
from the package:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mangkhut_winds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/calc_grid_winds.html">calc_grid_winds</a></span><span class="op">(</span>hurr_track <span class="op">=</span> <span class="va">mangkhut_to_model</span>, </span>
<span>                                  grid_df <span class="op">=</span> <span class="va">points_to_model</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in weathermetrics::convert_wind_speed(hurr_track$vmax, "knots", : Some</span></span>
<span><span class="co">#&gt; of the observations in the data gave negative wind speeds. Since wind speed</span></span>
<span><span class="co">#&gt; cannot have a negative value, these observations were set to 'NA'.</span></span>
<span><span class="co">#&gt; Warning in knots_to_speed(wind_speed, unit = new_metric, round = round): Some</span></span>
<span><span class="co">#&gt; of the observations in the data gave negative wind speeds. Since wind speed</span></span>
<span><span class="co">#&gt; cannot have a negative value, these observations were set to 'NA'.</span></span></code></pre></div>
<p>The output from this function is a list, each of which contains a
matrix. The modeled winds are included in the element of the list named
<code>vmax_sust</code>. Here is a section pulled from the middle of this
matrix:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mangkhut_winds</span><span class="op">$</span><span class="va">vmax_sust</span><span class="op">[</span><span class="fl">900</span><span class="op">:</span><span class="fl">910</span>, <span class="fl">2500</span><span class="op">:</span><span class="fl">2505</span><span class="op">]</span></span>
<span><span class="co">#&gt;                         2500     2501      2502      2503      2504      2505</span></span>
<span><span class="co">#&gt; 2018-09-15 20:45:00 10.31024 10.00689  9.676399  9.324705  8.957472  8.579940</span></span>
<span><span class="co">#&gt; 2018-09-15 21:00:00 10.65742 10.34744 10.008068  9.645680  9.266362  8.875745</span></span>
<span><span class="co">#&gt; 2018-09-15 21:15:00 11.02392 10.70674 10.357711  9.983692  9.591240  9.186426</span></span>
<span><span class="co">#&gt; 2018-09-15 21:30:00 11.40499 11.08035 10.721195 10.334903  9.928559  9.508718</span></span>
<span><span class="co">#&gt; 2018-09-15 21:45:00 11.80079 11.46845 11.098676 10.699446 10.278417  9.842677</span></span>
<span><span class="co">#&gt; 2018-09-15 22:00:00 12.21143 11.87116 11.490285 11.077421 10.640872 10.188320</span></span>
<span><span class="co">#&gt; 2018-09-15 22:15:00 12.63702 12.28861 11.896114 11.468890 11.015947 10.545622</span></span>
<span><span class="co">#&gt; 2018-09-15 22:30:00 13.07761 12.72085 12.316216 11.873868 11.403608 10.914498</span></span>
<span><span class="co">#&gt; 2018-09-15 22:45:00 13.53313 13.16785 12.750568 12.292314 11.803783 11.294843</span></span>
<span><span class="co">#&gt; 2018-09-15 23:00:00 14.00373 13.62975 13.199223 12.724197 12.216351 11.686444</span></span>
<span><span class="co">#&gt; 2018-09-15 23:15:00 14.48909 14.10627 13.661957 13.169295 12.641073 12.089046</span></span></code></pre></div>
<p>You can see that each row gives data for a specific time, while each
column gives data for a specific grid point.</p>
<p>You can use this matrix in a couple of ways. First, if you’d like to
get a time series of the modeled winds at a certain location over the
course of a storm, you can do that. For example, we could create the
time series of modeled winds in Hong Kong for this storm. The latitude
and longitude of Hong Kong are 22.32 degrees North and 114.17 degrees
East.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">points_to_model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>dist_hk_lat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">glat</span> <span class="op">-</span> <span class="fl">22.32</span><span class="op">)</span>, </span>
<span>         dist_hk_lon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">glon</span> <span class="op">-</span> <span class="fl">114.17</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">(</span><span class="va">dist_hk_lat</span> <span class="op">+</span> <span class="va">dist_hk_lon</span><span class="op">)</span> <span class="op">==</span> </span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">dist_hk_lat</span> <span class="op">+</span> <span class="va">dist_hk_lon</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;   gridid  glon    glat glandsea dist_hk_lat dist_hk_lon</span></span>
<span><span class="co">#&gt; 1   2995 114.2 22.2909    FALSE  0.02910347        0.03</span></span>
<span><span class="va">points_to_model</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gridid</span> <span class="op">==</span> <span class="st">"2995"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   gridid  glon    glat glandsea</span></span>
<span><span class="co">#&gt; 1   2995 114.2 22.2909    FALSE</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hk_winds</span> <span class="op">&lt;-</span> <span class="va">mangkhut_winds</span><span class="op">$</span><span class="va">vmax_sust</span><span class="op">[</span> , <span class="st">"2995"</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">enframe</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"date"</span>, value <span class="op">=</span> <span class="st">"vmax_sust"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">hk_winds</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,081 × 2</span></span></span>
<span><span class="co">#&gt;    date                vmax_sust</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 2018-09-06 <span style="color: #949494;">12:00:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2018-09-06 <span style="color: #949494;">12:15:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 2018-09-06 <span style="color: #949494;">12:30:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 2018-09-06 <span style="color: #949494;">12:45:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 2018-09-06 <span style="color: #949494;">13:00:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 2018-09-06 <span style="color: #949494;">13:15:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 2018-09-06 <span style="color: #949494;">13:30:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 2018-09-06 <span style="color: #949494;">13:45:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 2018-09-06 <span style="color: #949494;">14:00:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 2018-09-06 <span style="color: #949494;">14:15:00</span>         0</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 1,071 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">hk_winds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">vmax_sust</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Removed 25 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code></pre></div>
<p><img src="timepoints_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mangkhut_timepoint</span> <span class="op">&lt;-</span> <span class="va">mangkhut_winds</span><span class="op">$</span><span class="va">vmax_sust</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">mangkhut_winds</span><span class="op">$</span><span class="va">vmax_sust</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span></span>
<span>                                                 <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2018-09-15 21:00:00"</span>, </span>
<span>                                                   <span class="st">"2018-09-16 05:00:00"</span>, </span>
<span>                                                   <span class="st">"2018-09-16 14:00:00"</span><span class="op">)</span>, <span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html" class="external-link">rownames_to_column</a></span><span class="op">(</span>var <span class="op">=</span> <span class="st">"date"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd_hms.html" class="external-link">ymd_hms</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span><span class="op">-</span><span class="va">date</span>, names_to <span class="op">=</span> <span class="st">"gridid"</span>, values_to <span class="op">=</span> <span class="st">"vmax_sust"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spatial_mangkhut_tp</span> <span class="op">&lt;-</span> <span class="va">grid_near_landfall</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">mangkhut_timepoint</span>, by <span class="op">=</span> <span class="st">"gridid"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">near_landfall</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">spatial_mangkhut_tp</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">vmax_sust</span><span class="op">)</span>, color <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://sjmgarnier.github.io/viridis/reference/scale_viridis.html" class="external-link">scale_fill_viridis</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, option <span class="op">=</span> <span class="st">"B"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"%Y-%m-%d %H:%M"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="timepoints_files/figure-html/unnamed-chunk-8-1.png" width="768"></p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ryan Zomorrodi, Brooke Anderson, Andrea Schumacher, Seth Guikema, Steven Quiring, Joshua Ferreri, Elizabeth Tennant, Jordan Robinson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
